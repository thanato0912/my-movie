(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{111:function(e,t,a){e.exports=a(198)},190:function(e,t,a){},198:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(7),o=a.n(l),c=a(33),i=a(13),m=(a(116),a(5)),s=a(20),u=a.n(s);var v=function(e){var t=Object(n.useState)(!1),a=Object(m.a)(t,2),l=a[0],o=a[1],i=Object(n.useState)(""),s=Object(m.a)(i,2),v=s[0],d=s[1];return Object(n.useEffect)((function(){u.a.get("http://localhost:5000/users/auth",{withCredentials:!0,mode:"cors"}).then((function(e){e.data.loginSuccess?(o(!0),d(e.data.token)):o(!1)}),(function(e){o(!1)}))}),[]),l?r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{onClick:function(){u.a.post("http://localhost:5000/users/logout",{token:v},{withCredentials:!0,mode:"cors"}).then((function(e){window.location="/"}),(function(e){alert(e)}))},className:"navbar-item",style:e.mystyle},r.a.createElement(c.b,{to:"/logout",className:"nav-link"},"Log Out"))):r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"navbar-item",style:e.mystyle},r.a.createElement(c.b,{to:"/login",className:"nav-link"},"Login")),r.a.createElement("li",{className:"navbar-item",style:e.mystyle},r.a.createElement(c.b,{to:"/register",className:"nav-link"},"Register")))};var d=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg bg-dark navbar-dark"},r.a.createElement(c.b,{to:"/",className:"navbar-brand"},"My-Movie"),r.a.createElement("div",{className:"collapse navbar-collapse"},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"navbar-item"},r.a.createElement(c.b,{to:"/latest",className:"nav-link"},"Latest")),r.a.createElement("li",{className:"navbar-item"},r.a.createElement(c.b,{to:"/favorites",className:"nav-link"},"My Favorites"))),r.a.createElement("ul",{className:"navbar-nav"},r.a.createElement(v,{style:{float:"right"}}))))},g=a(4),f=a(199),p=a(204),E=a(203);var h=function(e){return e.actor?r.a.createElement(E.a,{key:e.key,lg:6,md:8,xs:24},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("img",{style:{width:"100%",height:"320px"},alt:"",src:e.image}))):r.a.createElement(E.a,{key:e.key,lg:6,md:8,xs:24},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("a",{href:"/movie/".concat(e.movieId)},r.a.createElement("img",{style:{width:"100%",height:"320px"},alt:"",src:e.image}))))},b=f.a.Title;var y=function(e){return r.a.createElement("div",{style:{background:'url("'.concat(e.image,'"), #1c1c1c'),height:"500px",backgroundSize:"100%, cover",backgroundPosition:"center, center",width:"100%",position:"relative"}},r.a.createElement("div",{style:{position:"absolute",maxWidth:"500px",bottom:"2rem",marginLeft:"2rem"}},r.a.createElement(b,{style:{color:"white"},level:2},e.title),r.a.createElement("p",{style:{color:"white",fontSize:"1rem"}},e.text)))},w=a(105),j="77ec013b8f3ebce20f6b6b185bc76d23",k="https://api.themoviedb.org/3/",O="https://image.tmdb.org/t/p/",x=f.a.Title;var S=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),c=Object(m.a)(o,2),i=c[0],s=c[1],u=Object(n.useState)(1),v=Object(m.a)(u,2),d=v[0],f=v[1];Object(n.useEffect)((function(){var e="".concat(k,"movie/popular?api_key=").concat(j,"&language=en-US&page=");E(e+d),s(!0)}),[]);var E=function(e){fetch(e).then((function(e){return e.json()})).then((function(e){l([].concat(Object(g.a)(a),Object(g.a)(e.results)))}))},b=Math.floor(20*Math.random());return r.a.createElement("div",{style:{width:"100%",margin:0}},a[0]&&r.a.createElement(y,{image:"".concat(O,"w1280").concat(a[b].backdrop_path),title:a[b].original_title,text:a[b].overview}),r.a.createElement("div",{style:{width:"65%",margin:"1rem auto"}},r.a.createElement(x,{level:2,type:"secondary"},"Now Trending"),r.a.createElement("hr",null),r.a.createElement(w.a,{dataLength:a.length,next:function(){var e="".concat(k,"movie/popular?api_key=").concat(j,"&language=en-US&page=");E(e+(d+1)),f(d+1)},hasMore:!0,loader:r.a.createElement("h4",null,"Loading...")},r.a.createElement(p.a,{gutter:[16,16]},i&&a.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(h,{image:e.poster_path&&"".concat(O,"w500").concat(e.poster_path),movieId:e.id}))}))))))},I=a(200);var N=function(e){return e.actor?r.a.createElement(E.a,{key:e.key,lg:6,md:8,xs:24},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("img",{style:{width:"100%",height:"320px"},alt:"",src:e.image}))):r.a.createElement(E.a,{key:e.key,lg:6,md:8,xs:24},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("a",{href:"/movie/".concat(e.movieId)},r.a.createElement("img",{style:{width:"100%",height:"320px"},alt:"",src:e.image}))))},_=f.a.Title;var C=function(e){return r.a.createElement("div",{style:{background:'url("'.concat(e.image,'"), #1c1c1c'),height:"500px",backgroundSize:"100%, cover",backgroundPosition:"center, center",width:"100%",position:"relative"}},r.a.createElement("div",{style:{position:"absolute",maxWidth:"500px",bottom:"2rem",marginLeft:"2rem"}},r.a.createElement(_,{style:{color:"white"},level:2},e.title),r.a.createElement("p",{style:{color:"white",fontSize:"1rem"}},e.text)))},F=f.a.Title;var T=function(){var e=Object(n.useState)([]),t=Object(m.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(1),c=Object(m.a)(o,2),i=c[0],s=c[1];Object(n.useEffect)((function(){var e="".concat(k,"movie/upcoming?api_key=").concat(j,"&language=en-US&page=");u(e+i)}),[]);var u=function(e){fetch(e).then((function(e){return e.json()})).then((function(e){l([].concat(Object(g.a)(a),Object(g.a)(e.results)))}))},v=Math.floor(20*Math.random());return r.a.createElement("div",{style:{width:"100%",margin:0}},a[0]&&r.a.createElement(C,{image:"".concat(O,"w1280").concat(a[v].backdrop_path),title:a[v].original_title,text:a[v].overview}),r.a.createElement("div",{style:{width:"65%",margin:"1rem auto"}},r.a.createElement(F,{level:2,type:"secondary"},"Upcoming"),r.a.createElement("hr",null),r.a.createElement(p.a,{gutter:[16,16]},a&&a.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(N,{image:e.poster_path&&"".concat(O,"w500").concat(e.poster_path),movieId:e.id}))}))),r.a.createElement("br",null),r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement(I.a,{onClick:function(){var e="".concat(k,"movie/upcoming?api_key=").concat(j,"&language=en-US&page=");u(e+(i+1)),s(i+1)}},"Load More"))),r.a.createElement("div",null))},L=a(201),M=f.a.Title;var P=function(e){return r.a.createElement("div",{style:{background:'url("'.concat(e.image,'"), #1c1c1c'),height:"500px",backgroundSize:"100%, cover",backgroundPosition:"center, center",width:"100%",position:"relative"}},r.a.createElement("div",{style:{position:"absolute",maxWidth:"500px",bottom:"2rem",marginLeft:"2rem"}},r.a.createElement(M,{style:{color:"white"},level:2},e.title),r.a.createElement("p",{style:{color:"white",fontSize:"1rem"}},e.text)))};var R=function(e){return e.actor?r.a.createElement(E.a,{key:e.key,lg:6,md:8,xs:24},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("img",{style:{width:"100%",height:"320px"},alt:"",src:e.image}))):r.a.createElement(E.a,{key:e.key,lg:6,md:8,xs:24},r.a.createElement("div",{style:{position:"relative"}},r.a.createElement("a",{href:"/movie/".concat(e.movieId)},r.a.createElement("img",{style:{width:"100%",height:"320px"},alt:"",src:e.image}))))};var A=function(e){var t={userFrom:e.userFrom,movieId:e.movieId,movieTitle:e.movieInfo.original_title,movieImage:e.movieInfo.backdrop_path,movieRunTime:e.movieInfo.runtime},a=Object(n.useState)(0),l=Object(m.a)(a,2),o=l[0],c=l[1],i=Object(n.useState)(!1),s=Object(m.a)(i,2),v=s[0],d=s[1];return Object(n.useEffect)((function(){u.a.get("http://localhost:5000/favorites/favoriteNumber",t).then((function(e){e.data&&c(e.data.FavoriteNumber)})),u.a.get("http://localhost:5000/favorites/favorited",t).then((function(e){e.data&&d(e.data.favorited)}))}),[]),r.a.createElement(I.a,{onClick:function(){u.a.get("http://localhost:5000/users/auth",{withCredentials:!0,mode:"cors"}).then((function(e){e.data.loginSuccess?v?u.a.post("http://localhost:5000/favorites/removeFromFavorite",t).then((function(e){e.data.success&&(c(o-1),d(!v))})):u.a.post("http://localhost:5000/favorites/addToFavorite",t).then((function(e){e.data.success&&(c(o+1),d(!v))})):alert("Please log in first!")}),(function(e){alert(e)}))}},v?"Remove":"Add to Favorite"," ",o)};var U=function(e){var t=Object(n.useState)([]),a=Object(m.a)(t,2),l=a[0],o=a[1],c=Object(n.useState)([]),i=Object(m.a)(c,2),s=i[0],u=i[1],v=Object(n.useState)(!1),d=Object(m.a)(v,2),g=d[0],f=d[1],E=e.match.params.movieId;return Object(n.useEffect)((function(){fetch("".concat(k,"movie/").concat(E,"?api_key=").concat(j,"&language=en-US")).then((function(e){return e.json()})).then((function(e){console.log(e),o(e),fetch("".concat(k,"movie/").concat(E,"/credits?api_key=").concat(j,"&language=en-US")).then((function(e){return e.json()})).then((function(e){return u(e.cast)}))}))}),[]),r.a.createElement("div",null,r.a.createElement("div",{style:{width:"100%"}},l&&r.a.createElement(P,{image:"".concat(O,"w1280").concat(l.backdrop_path),title:l.original_title,text:l.overview})),r.a.createElement("div",{style:{width:"80%",margin:"1rem auto"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end"}},r.a.createElement(A,{userFrom:localStorage.getItem("userId"),movieId:E,movieInfo:l})),r.a.createElement(L.a,{title:"Movie Info",bordered:!0},r.a.createElement(L.a.Item,{style:{textColor:"green"},label:"Title"},l.original_title),r.a.createElement(L.a.Item,{label:"release_date"},l.release_date),r.a.createElement(L.a.Item,{label:"revenue"},l.revenue),r.a.createElement(L.a.Item,{label:"runtime"},l.runtime),r.a.createElement(L.a.Item,{label:"vote_average",span:2},l.vote_average),r.a.createElement(L.a.Item,{label:"vote_count"},l.vote_count),r.a.createElement(L.a.Item,{label:"status"},l.status),r.a.createElement(L.a.Item,{label:"popularity"},l.popularity)),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"1%"}},r.a.createElement(I.a,{onClick:function(){f(!g)}},"Actors")),g&&r.a.createElement(p.a,{gutter:[24,24]},s&&s.map((function(e,t){return r.a.createElement(r.a.Fragment,null,e.profile_path&&r.a.createElement(R,{key:t,actor:!0,image:"".concat(O,"w500").concat(e.profile_path)}))})))))},q=a(205),z=(a(190),f.a.Title);var D=function(){var e={userFrom:localStorage.getItem("userId")},t=Object(n.useState)([]),a=Object(m.a)(t,2),l=a[0],o=a[1];Object(n.useEffect)((function(){u.a.get("http://localhost:5000/users/auth",{withCredentials:!0,mode:"cors"}).then((function(e){e.data.loginSuccess||(alert("Please log in first!"),window.location="/")}),(function(e){alert(e),window.location="/"})),u.a.post("http://localhost:5000/favorites/getFavoriteMovies",e).then((function(e){e.data.success?o(e.data.favorites):alert("failed to retrieve favorite movies!")}))}),[]);var c=l.map((function(e,t){console.log(t);var a=r.a.createElement("div",null,e.moviePost?r.a.createElement("img",{src:"".concat(O,"w500").concat(e.moviePost),alt:"moviePost"}):"no image");return r.a.createElement("tr",{key:t},r.a.createElement(q.a,{content:a,title:"".concat(e.movieTitle)},r.a.createElement("td",null,e.movieTitle)),r.a.createElement("td",null,e.movieRunTime),r.a.createElement("td",null,r.a.createElement(I.a,{onClick:function(){return function(e,t){var a={movieId:e,userFrom:localStorage.getItem("userId")};u.a.post("http://localhost:5000/favorites/removeFromFavorite",a).then((function(t){t.data.success?o(l.filter((function(t){return t.movieId!==e}))):alert("Fail to remove to favorite!")}))}(e.movieId)}},"remove ",t)))}));return r.a.createElement("div",{style:{width:"85%",margin:"2rem auto"}},r.a.createElement(z,{level:2,style:{color:"#001f3f"}},"My Favorite Movies"),r.a.createElement("hr",null),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Title"),r.a.createElement("th",null,"Runtime"),r.a.createElement("th",null,"Remove"))),r.a.createElement("tbody",null,c)))},W=a(61);var J=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),c=Object(m.a)(o,2),i=c[0],s=c[1];return r.a.createElement("div",{style:{paddingLeft:"20%",paddingRight:"20%",paddingTop:"4%"}},r.a.createElement("h3",{style:{textAlign:"center"}},"Login Page"),r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Email: "),r.a.createElement("input",{type:"text",className:"form-control",required:!0,value:a,onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"Password: "),r.a.createElement("input",{type:"password",className:"form-control",required:!0,value:i,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault();var t={email:a,password:i,withCredentials:!0};u.a.post("http://localhost:5000/users/login",t,{withCredentials:!0,mode:"cors"}).then((function(e){window.localStorage.setItem("loginSuccess",!0),window.localStorage.setItem("userId",e.data.userId),window.localStorage.setItem("token",e.data.token),window.location="/"}),(function(e){var t,a=e.response.data.errors,n="",r=Object(W.a)(a);try{for(r.s();!(t=r.n()).done;){var l;n+=t.value.msg+"\n"}}catch(l){r.e(l)}finally{r.f()}alert(n)}))},className:"btn btn-dark btn-lg btn-block"},"Login"))))};var B=function(){var e=Object(n.useState)(""),t=Object(m.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),c=Object(m.a)(o,2),i=c[0],s=c[1],v=Object(n.useState)("male"),d=Object(m.a)(v,2),g=d[0],f=d[1],p=Object(n.useState)(""),E=Object(m.a)(p,2),h=E[0],b=E[1],y=Object(n.useState)(""),w=Object(m.a)(y,2),j=w[0],k=w[1];return r.a.createElement("div",{style:{paddingLeft:"20%",paddingRight:"20%",paddingTop:"4%"}},r.a.createElement("h3",{style:{textAlign:"center"}},"Registration"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t={firstname:a,lastname:i,gender:g,email:h,password:j};u.a.post("http://localhost:5000/users/register",t).then((function(e){void 0!==e.data.errors?alert(e.data.errors[0].msg):(window.location="/",alert("Login Sucess!"))}),(function(e){var t,a=e.response.data.errors,n="",r=Object(W.a)(a);try{for(r.s();!(t=r.n()).done;){var l;n+=t.value.msg+"\n"}}catch(l){r.e(l)}finally{r.f()}alert(n)}))}},r.a.createElement("div",{className:"form-group"},r.a.createElement("lable",null,"First Name: "),r.a.createElement("input",{type:"text",className:"form-control",required:!0,value:a,onChange:function(e){return l(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("lable",null,"Last Name: "),r.a.createElement("input",{type:"text",className:"form-control",required:!0,value:i,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{for:"gender"},"Choose your gender:"),r.a.createElement("select",{className:"form-control",id:"gender",name:"gender",onChange:function(e){return f(e.target.value)},value:g},r.a.createElement("option",{value:"male"},"Male"),r.a.createElement("option",{value:"female"},"Female"),r.a.createElement("option",{value:"do not want to specify"},"Do not want to specify"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("lable",null,"Email: "),r.a.createElement("input",{type:"text",className:"form-control",required:!0,value:h,onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("lable",null,"Password: "),r.a.createElement("input",{type:"password",className:"form-control",required:!0,value:j,onChange:function(e){return k(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{type:"submit",className:"btn btn-dark btn-lg btn-block"},"Login"))))},G=a(202),H=(a(191),G.a.Footer);var K=function(){return r.a.createElement(c.a,null,r.a.createElement(d,null),r.a.createElement(i.a,{exact:!0,path:"/",component:S}),r.a.createElement(i.a,{exact:!0,path:"/latest",component:T}),r.a.createElement(i.a,{exact:!0,path:"/movie/:movieId",component:U}),r.a.createElement(i.a,{exact:!0,path:"/favorites",component:D}),r.a.createElement(i.a,{exact:!0,path:"/login",component:J}),r.a.createElement(i.a,{exact:!0,path:"/register",component:B}),r.a.createElement(H,{style:{textAlign:"center"}},"My-Movie \xa92020 Created by SSSAANG"))};o.a.render(r.a.createElement(K,null),document.getElementById("root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.2842d7ad.chunk.js.map